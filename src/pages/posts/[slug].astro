---
import { getCollection, getEntry, render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');

  return posts
    .filter( entry => entry.id.startsWith('es-'))
    .map(entry => ({
      params: {
        slug: entry.id.substring(3)
      }
  }))
}

import PostsLayout from '../../layouts/PostsLayout.astro';

const entry = await getEntry('posts', 'es-'+Astro.params.slug);
const {Content} = await render(entry);
---

<PostsLayout pageTitle={entry.data.title} slug="/posts/">
  <Content />
</PostsLayout>
